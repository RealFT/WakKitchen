fileFormatVersion: 2
guid: 98ca602668a519840a0407922b8a25ec
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: "{\"source\":\"\\\"use strict\\\";\\r\\nObject.defineProperty(exports,
    \\\"__esModule\\\", { value: true });\\r\\nconst ZEPETO_Script_1 = require(\\\"ZEPETO.Script\\\");\\r\\nconst
    UnityEngine_1 = require(\\\"UnityEngine\\\");\\r\\nconst UnityEngine_UI_1 = require(\\\"UnityEngine.UI\\\");\\r\\nconst
    EquipSlot_1 = require(\\\"./EquipSlot\\\");\\r\\nconst CardData_1 = require(\\\"./CardData\\\");\\r\\nconst
    ItemManager_1 = require(\\\"../ItemManager\\\");\\r\\nconst UIManager_1 = require(\\\"../UIManager\\\");\\r\\nconst
    SoundManager_1 = require(\\\"../SoundManager\\\");\\r\\nconst Mediator_1 = require(\\\"../Notification/Mediator\\\");\\r\\nconst
    DataManager_1 = require(\\\"../DataManager\\\");\\r\\nclass EquipSlotController
    extends ZEPETO_Script_1.ZepetoScriptBehaviour {\\r\\n    constructor() {\\r\\n       
    super(...arguments);\\r\\n        this.equipSlots = [];\\r\\n    }\\r\\n    Start()
    {\\r\\n        this.equipSlots = this.equipSlotParent.GetComponentsInChildren($typeof(EquipSlot_1.default));\\r\\n       
    for (let i = 0; i < this.equipSlots.length; i++) {\\r\\n            let toggle
    = this.equipSlots[i].GetSelectSectionOpenToggle();\\r\\n            toggle.onValueChanged.AddListener((isOn)
    => {\\r\\n                if (isOn) {\\r\\n                    this.OnToggleValueChanged(toggle);\\r\\n               
    }\\r\\n            });\\r\\n        }\\r\\n        const upgradedlevel = ItemManager_1.default.GetInstance().GetUpgradedLevel(\\\"employee\\\");\\r\\n       
    this.EquipUnlock(upgradedlevel);\\r\\n        Mediator_1.default.GetInstance().RegisterListener(this);\\r\\n   
    }\\r\\n    OnDestroy() {\\r\\n        Mediator_1.default.GetInstance().UnregisterListener(this);\\r\\n   
    }\\r\\n    OnNotify(sender, eventName, eventData) {\\r\\n        switch (eventName)
    {\\r\\n            case Mediator_1.EventNames.UpgradeUpdated:\\r\\n               
    const upgradedLevel = ItemManager_1.default.GetInstance().GetUpgradedLevel(\\\"employee\\\");\\r\\n               
    this.EquipUnlock(upgradedLevel);\\r\\n                break;\\r\\n           
    case Mediator_1.EventNames.StageEnded:\\r\\n                this.ClearSlots();\\r\\n               
    break;\\r\\n            default:\\r\\n                // In case an unhandled
    event occurs\\r\\n                break;\\r\\n        }\\r\\n    }\\r\\n    //
    \uB2E4\uB978 \uC7A5\uCC29 \uCE90\uB9AD\uD130\uC758 \uC139\uC158 \uC120\uD0DD
    \uC2DC \uB2E4\uB978 \uC139\uC158\uC740 \uBE44\uD65C\uC131\uD654\uB418\uB294 \uAE30\uB2A5\\r\\n   
    OnToggleValueChanged(toggle) {\\r\\n        if (toggle != this.selectedToggle)
    {\\r\\n            // If a different toggle is selected\\r\\n            if (this.selectedToggle)
    {\\r\\n                this.selectedToggle.isOn = false; // Deselect the previously
    selected toggle\\r\\n            }\\r\\n            this.selectedToggle = toggle;
    // Save the new selected toggle\\r\\n        }\\r\\n        else {\\r\\n           
    // If the same toggle is selected again\\r\\n            this.selectedToggle
    = null; // Deselect the current toggle\\r\\n        }\\r\\n    }\\r\\n    EquipCharacter(cardData)
    {\\r\\n        // Find an empty card equip slot\\r\\n        let emptyIndex =
    -1;\\r\\n        for (let i = 0; i < this.equipSlots.length; i++) {\\r\\n           
    if (!this.equipSlots[i].IsEquip()) {\\r\\n                emptyIndex = i;\\r\\n               
    break;\\r\\n            }\\r\\n        }\\r\\n        if (emptyIndex != -1) {\\r\\n           
    // Equip the character to the first empty card equip slot\\r\\n            this.equipSlots[emptyIndex].EquipCard(cardData,
    emptyIndex);\\r\\n            SoundManager_1.default.GetInstance().OnPlaySFX(SoundManager_1.default.GetInstance().keyBtnEquip);\\r\\n       
    }\\r\\n        else {\\r\\n            UIManager_1.default.GetInstance().OpenInformation(\\\"No
    slots available.\\\");\\r\\n            SoundManager_1.default.GetInstance().OnPlaySFX(\\\"Tresh\\\");\\r\\n       
    }\\r\\n    }\\r\\n    EquipUnlock(level) {\\r\\n        for (let i = 0; i < level;
    i++) {\\r\\n            this.equipSlots[i].Unlock();\\r\\n        }\\r\\n   
    }\\r\\n    // Checks if all equipment slots are selected.\\r\\n    CheckSlots()
    {\\r\\n        for (let i = 0; i < this.equipSlots.Length; i++) {\\r\\n           
    // Check only unlocked slots,\\r\\n            // If any equipped slot is not
    selected, return false.\\r\\n            if (!this.equipSlots[i].IsLocked() &&\\r\\n               
    this.equipSlots[i].IsEquip() &&\\r\\n                !this.equipSlots[i].IsSelected())
    {\\r\\n                return false;\\r\\n            }\\r\\n        }\\r\\n       
    // If all unlocked slots are selected, return true.\\r\\n        return true;\\r\\n   
    }\\r\\n    ClearSlots() {\\r\\n        for (let i = 0; i < this.equipSlots.Length;
    i++) {\\r\\n            this.equipSlots[i].InitSlot();\\r\\n        }\\r\\n   
    }\\r\\n}\\r\\nexports.default = EquipSlotController;\\r\\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXF1aXBTbG90Q29udHJvbGxlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkVxdWlwU2xvdENvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpREFBcUQ7QUFDckQsNkNBQWlEO0FBQ2pELG1EQUF3QztBQUN4QywyQ0FBb0M7QUFDcEMseUNBQWtDO0FBQ2xDLGdEQUF5QztBQUN6Qyw0Q0FBcUM7QUFDckMsa0RBQTJDO0FBQzNDLHVEQUEyRTtBQUMzRSxnREFBeUM7QUFFekMsTUFBcUIsbUJBQW9CLFNBQVEscUNBQXFCO0lBQXRFOztRQUdZLGVBQVUsR0FBZ0IsRUFBRSxDQUFDO0lBa0d6QyxDQUFDO0lBL0ZHLEtBQUs7UUFDRCxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxlQUFlLENBQUMsdUJBQXVCLFNBQUMsbUJBQVMsRUFBRyxDQUFDO1FBQzVFLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUM3QyxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLDBCQUEwQixFQUFFLENBQUM7WUFDN0QsTUFBTSxDQUFDLGNBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLEVBQUUsRUFBRTtnQkFDdkMsSUFBSSxJQUFJLEVBQUU7b0JBQ04sSUFBSSxDQUFDLG9CQUFvQixDQUFDLE1BQU0sQ0FBQyxDQUFDO2lCQUNyQztZQUNMLENBQUMsQ0FBQyxDQUFDO1NBQ047UUFFRCxNQUFNLGFBQWEsR0FBRyxxQkFBVyxDQUFDLFdBQVcsRUFBRSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQzdFLElBQUksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDaEMsa0JBQVEsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FB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\",\"assetPath\":\"Assets/Scripts/Employee/EquipSlotController.ts\",\"manifest\":{\"properties\":[{\"assembly\":\"UnityEngine.CoreModule\",\"name\":\"equipSlotParent\",\"type\":\"UnityEngine.GameObject\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]}],\"name\":\"EquipSlotController\",\"description\":\"\"},\"isCompiled\":true}"
  typescriptHash: 9ae253130c2ec59b1466846f02c78eb6
  onlyWriteTrigger: 0
