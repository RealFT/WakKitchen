fileFormatVersion: 2
guid: 5f832a3d001d0a94eb482fc329270d44
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst UnityEngine_1 = require(\"UnityEngine\");\r\nconst
    ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst CardData_1 = require(\"./CardData\");\r\nconst
    EmployeeSlot_1 = require(\"./EmployeeSlot\");\r\nconst Mediator_1 = require(\"../Notification/Mediator\");\r\nclass
    EmployeeManager extends ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    constructor()
    {\r\n        super(...arguments);\r\n        this.employeeSlots = [];\r\n       
    this.cardDataWithSectionArray = [];\r\n        this.employeeHeadCount = 0;\r\n   
    }\r\n    static GetInstance() {\r\n        if (!EmployeeManager.Instance) {\r\n           
    var _obj = UnityEngine_1.GameObject.Find(\"EmployeeManager\");\r\n           
    if (!_obj) {\r\n                _obj = new UnityEngine_1.GameObject(\"EmployeeManager\");\r\n               
    _obj.AddComponent($typeof(EmployeeManager));\r\n            }\r\n           
    EmployeeManager.Instance = _obj.GetComponent($typeof(EmployeeManager));\r\n           
    UnityEngine_1.GameObject.DontDestroyOnLoad(_obj);\r\n        }\r\n        return
    EmployeeManager.Instance;\r\n    }\r\n    Awake() {\r\n        if (this != EmployeeManager.GetInstance())\r\n           
    UnityEngine_1.GameObject.Destroy(this.gameObject);\r\n    }\r\n    Start() {\r\n       
    // var employees = this.employeeSlotContent.GetComponentsInChildren<EmployeeSlot>(true);
    \r\n        // for (let index = 0; index < this.employeeSlots.length; index++)
    {\r\n        //     this.employeeSlots[index] = employees[index];\r\n       
    //     console.log(employees[index]);\r\n        // }\r\n        Mediator_1.default.GetInstance().RegisterListener(this);\r\n   
    }\r\n    OnDestroy() {\r\n        Mediator_1.default.GetInstance().UnregisterListener(this);\r\n   
    }\r\n    StartEmployee() {\r\n        this.employeeHeadCount = 0;\r\n       
    this.cardDataWithSectionArray.forEach((data) => {\r\n            this.CreateEmployeeSlot(data.cardData,
    data.section);\r\n        });\r\n        this.employeeSlots.forEach((slot) =>
    {\r\n            if (slot.gameObject.activeSelf) {\r\n                slot.StartWorking();\r\n               
    this.employeeHeadCount++;\r\n            }\r\n        });\r\n    }\r\n    OnNotify(sender,
    eventName, eventData) {\r\n        if (!this.gameObject.activeSelf)\r\n           
    return;\r\n        switch (eventName) {\r\n            case Mediator_1.EventNames.StageStarted:\r\n               
    //this.StartEmployee();\r\n                break;\r\n            case Mediator_1.EventNames.StageEnded:\r\n               
    this.employeeSlots.forEach((slot) => {\r\n                    slot.Init();\r\n                   
    slot.gameObject.SetActive(false);\r\n                });\r\n                break;\r\n       
    }\r\n    }\r\n    CreateEmployeeSlot(cardData, section) {\r\n        let slot;\r\n       
    const inactiveSlotIndex = this.employeeSlots.findIndex(s => !s.gameObject.activeSelf);\r\n       
    if (inactiveSlotIndex !== -1) { // reuse inactive slot\r\n            slot =
    this.employeeSlots[inactiveSlotIndex];\r\n            slot.gameObject.SetActive(true);\r\n       
    }\r\n        else { // instantiate new slot\r\n            const cardObj = UnityEngine_1.Object.Instantiate(this.employeeSlotPrefab,
    this.employeeSlotContent.transform);\r\n            slot = cardObj.GetComponent($typeof(EmployeeSlot_1.default));\r\n           
    this.employeeSlots.push(slot);\r\n        }\r\n        slot.SetEmployee(cardData,
    section);\r\n        slot.gameObject.SetActive(true);\r\n    }\r\n    RegisterCardBySlotIndex(slotIndex,
    cardData, section) {\r\n        this.cardDataWithSectionArray[slotIndex] = {
    cardData, section };\r\n    }\r\n    UnregisterCard(slotIndex) {\r\n        this.cardDataWithSectionArray[slotIndex]
    = { cardData: null, section: null };\r\n    }\r\n    GetTotalEmployeePay() {\r\n       
    return this.employeeHeadCount * 100;\r\n    }\r\n}\r\nexports.default = EmployeeManager;\r\n//#
    sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRW1wbG95ZWVNYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiRW1wbG95ZWVNYW5hZ2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNkNBQWlEO0FBQ2pELGlEQUFxRDtBQUNyRCx5Q0FBa0M7QUFDbEMsaURBQTBDO0FBQzFDLHVEQUEyRTtBQU0zRSxNQUFxQixlQUFnQixTQUFRLHFDQUFxQjtJQUFsRTs7UUFtQlksa0JBQWEsR0FBbUIsRUFBRSxDQUFDO1FBQ25DLDZCQUF3QixHQUEwQixFQUFFLENBQUM7UUFDckQsc0JBQWlCLEdBQVcsQ0FBQyxDQUFDO0lBeUUxQyxDQUFDO0lBM0ZVLE1BQU0sQ0FBQyxXQUFXO1FBQ3JCLElBQUksQ0FBQyxlQUFlLENBQUMsUUFBUSxFQUFFO1lBRTNCLElBQUksSUFBSSxHQUFHLHdCQUFVLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLENBQUM7WUFDOUMsSUFBSSxDQUFDLElBQUksRUFBRTtnQkFDUCxJQUFJLEdBQUcsSUFBSSx3QkFBVSxDQUFDLGlCQUFpQixDQUFDLENBQUM7Z0JBQ3pDLElBQUksQ0FBQyxZQUFZLFNBQUMsZUFBZSxHQUFJO2FBQ3hDO1lBQ0QsZUFBZSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsWUFBWSxTQUFDLGVBQWUsRUFBRyxDQUFDO1lBQ2hFLHdCQUFVLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLENBQUM7U0FDdEM7UUFDRCxPQUFPLGVBQWUsQ0FBQyxRQUFRLENBQUM7SUFDcEMsQ0FBQztJQVFELEtBQUs7UUFDRCxJQUFJLElBQUksSUFBSSxlQUFlLENBQUMsV0FBVyxFQUFFO1lBQUUsd0JBQVUsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQ25GLENBQUM7SUFFRCxLQUFLO1FBQ0QseUZBQXlGO1FBQ3pGLG9FQUFvRTtRQUNwRSxvREFBb0Q7UUFDcEQscUNBQXFDO1FBQ3JDLElBQUk7UUFDSixrQkFBUSxDQUFDLFdB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","assetPath":"Assets/Scripts/Employee/EmployeeManager.ts","manifest":{"properties":[{"assembly":"UnityEngine.CoreModule","name":"employeeSlotContent","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[{"name":"SerializeField","args":[]}]},{"assembly":"UnityEngine.CoreModule","name":"employeeSlotPrefab","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[{"name":"SerializeField","args":[]}]}],"name":"EmployeeManager","description":""},"isCompiled":true}'
  typescriptHash: 94f10520d05dae2a59f0dfdd92deed91
  onlyWriteTrigger: 0
