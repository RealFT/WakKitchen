fileFormatVersion: 2
guid: 5f832a3d001d0a94eb482fc329270d44
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst UnityEngine_1 = require(\"UnityEngine\");\r\nconst
    ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst CardData_1 = require(\"./CardData\");\r\nconst
    EmployeeSlot_1 = require(\"./EmployeeSlot\");\r\nconst Mediator_1 = require(\"../Notification/Mediator\");\r\nclass
    EmployeeManager extends ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    constructor()
    {\r\n        super(...arguments);\r\n        this.employeeSlots = [];\r\n       
    this.cardDataWithSectionArray = [];\r\n    }\r\n    static GetInstance() {\r\n       
    if (!EmployeeManager.Instance) {\r\n            var _obj = UnityEngine_1.GameObject.Find(\"EmployeeManager\");\r\n           
    if (!_obj) {\r\n                _obj = new UnityEngine_1.GameObject(\"EmployeeManager\");\r\n               
    _obj.AddComponent($typeof(EmployeeManager));\r\n            }\r\n           
    EmployeeManager.Instance = _obj.GetComponent($typeof(EmployeeManager));\r\n           
    UnityEngine_1.GameObject.DontDestroyOnLoad(_obj);\r\n        }\r\n        return
    EmployeeManager.Instance;\r\n    }\r\n    Awake() {\r\n        if (this != EmployeeManager.GetInstance())\r\n           
    UnityEngine_1.GameObject.Destroy(this.gameObject);\r\n    }\r\n    Start() {\r\n       
    // var employees = this.employeeSlotContent.GetComponentsInChildren<EmployeeSlot>(true);
    \r\n        // for (let index = 0; index < this.employeeSlots.length; index++)
    {\r\n        //     this.employeeSlots[index] = employees[index];\r\n       
    //     console.log(employees[index]);\r\n        // }\r\n        Mediator_1.default.GetInstance().RegisterListener(this);\r\n   
    }\r\n    OnDestroy() {\r\n        Mediator_1.default.GetInstance().UnregisterListener(this);\r\n   
    }\r\n    OnNotify(sender, eventName, eventData) {\r\n        if (!this.gameObject.activeSelf)\r\n           
    return;\r\n        switch (eventName) {\r\n            case Mediator_1.EventNames.StageStarted:\r\n               
    console.log(\"StageStarted: employee\");\r\n                console.log(this.cardDataWithSectionArray.length);\r\n               
    this.cardDataWithSectionArray.forEach((data) => {\r\n                    this.CreateEmployeeSlot(data.cardData,
    data.section);\r\n                });\r\n                this.employeeSlots.forEach((slot)
    => {\r\n                    if (slot.gameObject.activeSelf)\r\n                       
    slot.StartWorking();\r\n                });\r\n                break;\r\n           
    case Mediator_1.EventNames.StageEnded:\r\n                this.employeeSlots.forEach((slot)
    => {\r\n                    slot.Init();\r\n                    slot.gameObject.SetActive(false);\r\n               
    });\r\n                break;\r\n        }\r\n    }\r\n    CreateEmployeeSlot(cardData,
    section) {\r\n        let slot;\r\n        const inactiveSlotIndex = this.employeeSlots.findIndex(s
    => !s.gameObject.activeSelf);\r\n        if (inactiveSlotIndex !== -1) { // reuse
    inactive slot\r\n            slot = this.employeeSlots[inactiveSlotIndex];\r\n           
    slot.gameObject.SetActive(true);\r\n        }\r\n        else { // instantiate
    new slot\r\n            const cardObj = UnityEngine_1.Object.Instantiate(this.employeeSlotPrefab,
    this.employeeSlotContent.transform);\r\n            slot = cardObj.GetComponent($typeof(EmployeeSlot_1.default));\r\n           
    this.employeeSlots.push(slot);\r\n        }\r\n        slot.SetEmployee(cardData,
    section);\r\n        slot.gameObject.SetActive(true);\r\n    }\r\n    RegisterCardBySlotIndex(slotIndex,
    cardData, section) {\r\n        this.cardDataWithSectionArray[slotIndex] = {
    cardData, section };\r\n    }\r\n    UnregisterCard(slotIndex) {\r\n        this.cardDataWithSectionArray[slotIndex]
    = { cardData: null, section: null };\r\n    }\r\n}\r\nexports.default = EmployeeManager;\r\n//#
    sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRW1wbG95ZWVNYW5hZ2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiRW1wbG95ZWVNYW5hZ2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsNkNBQWlEO0FBQ2pELGlEQUFxRDtBQUNyRCx5Q0FBa0M7QUFDbEMsaURBQTBDO0FBQzFDLHVEQUEyRTtBQU0zRSxNQUFxQixlQUFnQixTQUFRLHFDQUFxQjtJQUFsRTs7UUFtQlksa0JBQWEsR0FBbUIsRUFBRSxDQUFDO1FBQ25DLDZCQUF3QixHQUEwQixFQUFFLENBQUM7SUFnRWpFLENBQUM7SUFqRlUsTUFBTSxDQUFDLFdBQVc7UUFDckIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxRQUFRLEVBQUU7WUFFM0IsSUFBSSxJQUFJLEdBQUcsd0JBQVUsQ0FBQyxJQUFJLENBQUMsaUJBQWlCLENBQUMsQ0FBQztZQUM5QyxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUNQLElBQUksR0FBRyxJQUFJLHdCQUFVLENBQUMsaUJBQWlCLENBQUMsQ0FBQztnQkFDekMsSUFBSSxDQUFDLFlBQVksU0FBQyxlQUFlLEdBQUk7YUFDeEM7WUFDRCxlQUFlLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxZQUFZLFNBQUMsZUFBZSxFQUFHLENBQUM7WUFDaEUsd0JBQVUsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsQ0FBQztTQUN0QztRQUNELE9BQU8sZUFBZSxDQUFDLFFBQVEsQ0FBQztJQUNwQyxDQUFDO0lBT0QsS0FBSztRQUNELElBQUksSUFBSSxJQUFJLGVBQWUsQ0FBQyxXQUFXLEVBQUU7WUFBRSx3QkFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDbkYsQ0FBQztJQUVELEtBQUs7UUFDRCx5RkFBeUY7UUFDekYsb0VBQW9FO1FBQ3BFLG9EQUFvRDtRQUNwRCxxQ0FBcUM7UUFDckMsSUFBSTtRQUNKLGtCQUFRLENBQUMsV0FBVyxFQUFFLENBQUMsZ0JBQWdCLENBQUMsSUFB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","assetPath":"Assets/Scripts/Employee/EmployeeManager.ts","manifest":{"properties":[{"assembly":"UnityEngine.CoreModule","name":"employeeSlotContent","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[{"name":"SerializeField","args":[]}]},{"assembly":"UnityEngine.CoreModule","name":"employeeSlotPrefab","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[{"name":"SerializeField","args":[]}]}],"name":"EmployeeManager","description":""},"isCompiled":true}'
  typescriptHash: 9bea48f7ff38162784cbad04b1e86913
  onlyWriteTrigger: 0
