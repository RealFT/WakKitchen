fileFormatVersion: 2
guid: 4b2a22358c407284aac95bea49d288e2
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: "{\"source\":\"\\\"use strict\\\";\\r\\nObject.defineProperty(exports,
    \\\"__esModule\\\", { value: true });\\r\\nconst ZEPETO_Script_1 = require(\\\"ZEPETO.Script\\\");\\r\\nconst
    UnityEngine_1 = require(\\\"UnityEngine\\\");\\r\\nconst EventSlot_1 = require(\\\"./EventSlot\\\");\\r\\nconst
    DataManager_1 = require(\\\"../DataManager\\\");\\r\\nclass EventTimer extends
    ZEPETO_Script_1.ZepetoScriptBehaviour {\\r\\n    constructor() {\\r\\n       
    super(...arguments);\\r\\n        this.eventSlots = []; // \uC774\uBCA4\uD2B8
    \uBCF4\uC0C1 \uC2AC\uB86F \uBC30\uC5F4\\r\\n        this.totalEventTime = 60
    * 60; // \uC774\uBCA4\uD2B8 \uCD1D \uC2DC\uAC04 (60\uBD84)\\r\\n        this.rewardInterval
    = 15 * 60; // \uBCF4\uC0C1 \uC218\uB839 \uAC04\uACA9 (15\uBD84)\\r\\n       
    this.firstRewardDelay = 5 * 60; // \uCC98\uC74C \uBCF4\uC0C1 \uC9C0\uC5F0 \uC2DC\uAC04
    (5\uBD84)\\r\\n        this.elapsedTime = 0; // \uACBD\uACFC \uC2DC\uAC04\\r\\n       
    this.interval = 1; // \uCD08 \uB2E8\uC704\uB85C \uC138\uACE0 \uC2F6\uC740 \uAC04\uACA9\\r\\n       
    this.redeemedIndex = 0; // \uCD08 \uB2E8\uC704\uB85C \uC138\uACE0 \uC2F6\uC740
    \uAC04\uACA9\\r\\n    }\\r\\n    OnEnable() {\\r\\n        this.eventTitleText.text
    = DataManager_1.default.GetInstance().GetCurrentLanguageData(\\\"event_title\\\");\\r\\n       
    this.eventDescriptionText.text = DataManager_1.default.GetInstance().GetCurrentLanguageData(\\\"event_description\\\");\\r\\n   
    }\\r\\n    OnDisable() {\\r\\n        // \uBCF4\uC0C1 \uD68D\uB4DD \uAC00\uB2A5
    \uC5EC\uBD80 \uC5C5\uB370\uC774\uD2B8\\r\\n        this.UpdateNewReward();\\r\\n   
    }\\r\\n    OnDestroy() {\\r\\n        // \uC885\uB8CC\uB420 \uB54C \uC2DC\uC810\uC758
    \uC2DC\uAC04 \uC800\uC7A5\\r\\n        DataManager_1.default.GetInstance().SetValue(\\\"time\\\",
    this.elapsedTime);\\r\\n        //DataManager.GetInstance().SetValue(\\\"redeemedIndex\\\",
    this.elapsedTime);\\r\\n    }\\r\\n    Start() {\\r\\n        // \uC774\uC804\uC5D0
    \uC800\uC7A5\uB41C \uC2DC\uAC04 \uBD88\uB7EC\uC624\uAE30\\r\\n        const savedTime
    = DataManager_1.default.GetInstance().GetValue(\\\"time\\\");\\r\\n        if
    (savedTime !== null) {\\r\\n            this.elapsedTime = savedTime;\\r\\n       
    }\\r\\n        // eventSlotObjs\uC5D0 \uB4F1\uB85D\uB41C EventSlot \uCEF4\uD3EC\uB10C\uD2B8\uB97C
    \uAC00\uC838\uC640\uC11C eventSlots\uC5D0 \uB4F1\uB85D\\r\\n        this.eventSlotObjs.forEach((slotObj)
    => {\\r\\n            const eventSlot = slotObj.GetComponent($typeof(EventSlot_1.default));\\r\\n           
    if (eventSlot) {\\r\\n                this.eventSlots.push(eventSlot);\\r\\n           
    }\\r\\n        });\\r\\n        this.eventTitleText.text = DataManager_1.default.GetInstance().GetCurrentLanguageData(\\\"event_title\\\");\\r\\n       
    this.eventDescriptionText.text = DataManager_1.default.GetInstance().GetCurrentLanguageData(\\\"event_description\\\");\\r\\n       
    this.StartTimer();\\r\\n        this.eventSlots[0].SetSlot(5, true, \\\"CODE1\\\");\\r\\n       
    this.eventSlots[1].SetSlot(15, false, \\\"3\\\");\\r\\n        this.eventSlots[2].SetSlot(30,
    true, \\\"CODE2\\\");\\r\\n        this.eventSlots[3].SetSlot(45, false, \\\"5\\\");\\r\\n       
    this.eventSlots[4].SetSlot(60, true, \\\"CODE3\\\");\\r\\n        //this.redeemedIndex
    = DataManager.GetInstance().GetValue(\\\"redeemedIndex\\\");\\r\\n    }\\r\\n   
    StartTimer() {\\r\\n        const intervalId = setInterval(() => {\\r\\n           
    if (this.IsDateWithinRange()) {\\r\\n                this.elapsedTime++;\\r\\n               
    // \uC774\uBCA4\uD2B8 \uC9C4\uD589\uB3C4 \uC5C5\uB370\uC774\uD2B8\\r\\n               
    this.UpdateEventProgress();\\r\\n                // \uB0A8\uC740 \uC2DC\uAC04
    \uC5C5\uB370\uC774\uD2B8\\r\\n                this.UpdateRemainingTime();\\r\\n               
    // \uBCF4\uC0C1 \uD68D\uB4DD \uAC00\uB2A5 \uC5EC\uBD80 \uC5C5\uB370\uC774\uD2B8\\r\\n               
    this.UpdateNewReward();\\r\\n            }\\r\\n            else {\\r\\n               
    // \uC774\uBCA4\uD2B8 \uC885\uB8CC\\r\\n                this.remainingTimeText.text
    = DataManager_1.default.GetInstance().GetCurrentLanguageData(\\\"event_time_end\\\");\\r\\n               
    this.UpdateNewReward();\\r\\n                clearInterval(intervalId);\\r\\n           
    }\\r\\n        }, this.interval * 1000);\\r\\n    }\\r\\n    UpdateEventProgress()
    {\\r\\n        const progressRatio = this.elapsedTime / this.totalEventTime;\\r\\n       
    this.eventProgressSlider.value = progressRatio;\\r\\n    }\\r\\n    UpdateRemainingTime()
    {\\r\\n        let remainingTime;\\r\\n        if (this.elapsedTime <= this.firstRewardDelay)
    {\\r\\n            remainingTime = this.firstRewardDelay - this.elapsedTime;\\r\\n       
    }\\r\\n        else {\\r\\n            const timeSinceLastReward = (this.elapsedTime
    - this.firstRewardDelay) % this.rewardInterval;\\r\\n            remainingTime
    = this.rewardInterval - timeSinceLastReward;\\r\\n        }\\r\\n        this.remainingTimeText.text
    = this.FormatTime(remainingTime);\\r\\n    }\\r\\n    UpdateNewReward() {\\r\\n       
    let isNew = false;\\r\\n        this.eventSlots.forEach((slot) => {\\r\\n           
    if (slot.CheckUnlock(this.elapsedTime)) {\\r\\n                isNew = true;\\r\\n           
    }\\r\\n        });\\r\\n        this.newObj.SetActive(isNew);\\r\\n    }\\r\\n   
    FormatTime(time) {\\r\\n        const next = DataManager_1.default.GetInstance().GetCurrentLanguageData(\\\"event_time_next\\\");\\r\\n       
    const minutes = Math.floor(time / 60);\\r\\n        const seconds = time % 60;\\r\\n       
    return `${next}: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2,
    '0')}`;\\r\\n    }\\r\\n    IsDateWithinRange() {\\r\\n        const currentDate
    = new Date();\\r\\n        const maxDate = new Date('2023-07-10');\\r\\n       
    // \uD074\uB77C\uC774\uC5B8\uD2B8\uC5D0 \uC800\uC7A5\uB41C \uB0A0\uC9DC\uAC00
    2023\uB144 7\uC6D4 10\uC77C\uAE4C\uC9C0\uC778\uC9C0 \uD655\uC778\\r\\n       
    if (currentDate <= maxDate) {\\r\\n            return true;\\r\\n        }\\r\\n       
    else {\\r\\n            return false;\\r\\n        }\\r\\n    }\\r\\n}\\r\\nexports.default
    = EventTimer;\\r\\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRXZlbnRUaW1lci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkV2ZW50VGltZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxpREFBcUQ7QUFDckQsNkNBQWdEO0FBR2hELDJDQUFvQztBQUNwQyxnREFBeUM7QUFFekMsTUFBcUIsVUFBVyxTQUFRLHFDQUFxQjtJQUE3RDs7UUFPWSxlQUFVLEdBQWdCLEVBQUUsQ0FBQyxDQUFHLGVBQWU7UUFDL0MsbUJBQWMsR0FBVyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsaUJBQWlCO1FBQ25ELG1CQUFjLEdBQVcsRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDLGlCQUFpQjtRQUNuRCxxQkFBZ0IsR0FBVyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsbUJBQW1CO1FBQ3RELGdCQUFXLEdBQVcsQ0FBQyxDQUFDLENBQUMsUUFBUTtRQUNqQyxhQUFRLEdBQVcsQ0FBQyxDQUFDLENBQUMsaUJBQWlCO1FBQ3ZDLGtCQUFhLEdBQVcsQ0FBQyxDQUFDLENBQUMsaUJBQWlCO0lBZ0h4RCxDQUFDO0lBOUdHLFFBQVE7UUFDSixJQUFJLENBQUMsY0FBYyxDQUFDLElBQUksR0FBRyxxQkFBVyxDQUFDLFdBQVcsRUFBRSxDQUFDLHNCQUFzQixDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzNGLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxJQUFJLEdBQUcscUJBQVcsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0lBQzNHLENBQUM7SUFFRCxTQUFTO1FBQ0wsbUJBQW1CO1FBQ25CLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRUQsU0FBUztRQUNMLGtCQUFrQjtRQUNsQixxQkFBVyxDQUFDLFdBQVcsRUFBRSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQzdELHdFQUF3RTtJQUM1RSxDQUFDO0lBRUQsS0FB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\",\"assetPath\":\"Assets/Scripts/Event/EventTimer.ts\",\"manifest\":{\"properties\":[{\"assembly\":\"Unity.TextMeshPro\",\"name\":\"eventTitleText\",\"type\":\"TMPro.TextMeshProUGUI\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"Unity.TextMeshPro\",\"name\":\"eventDescriptionText\",\"type\":\"TMPro.TextMeshProUGUI\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"Unity.TextMeshPro\",\"name\":\"remainingTimeText\",\"type\":\"TMPro.TextMeshProUGUI\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"UnityEngine.UI\",\"name\":\"eventProgressSlider\",\"type\":\"UnityEngine.UI.Slider\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"UnityEngine.CoreModule\",\"name\":\"eventSlotObjs\",\"type\":\"UnityEngine.GameObject[]\",\"isArray\":true,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"UnityEngine.CoreModule\",\"name\":\"newObj\",\"type\":\"UnityEngine.GameObject\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]}],\"name\":\"EventTimer\",\"description\":\"\"},\"isCompiled\":true}"
  typescriptHash: 859364cdfde93851bc44fc8445c02e87
  onlyWriteTrigger: 0
