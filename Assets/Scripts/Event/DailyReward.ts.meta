fileFormatVersion: 2
guid: 7f19129ddec44064fb74c0f346343ffe
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: "{\"source\":\"\\\"use strict\\\";\\r\\nObject.defineProperty(exports,
    \\\"__esModule\\\", { value: true });\\r\\nconst ZEPETO_Script_1 = require(\\\"ZEPETO.Script\\\");\\r\\nconst
    UnityEngine_1 = require(\\\"UnityEngine\\\");\\r\\nconst UnityEngine_UI_1 = require(\\\"UnityEngine.UI\\\");\\r\\nconst
    DataManager_1 = require(\\\"../DataManager\\\");\\r\\nconst UIManager_1 = require(\\\"../UIManager\\\");\\r\\nconst
    SoundManager_1 = require(\\\"../SoundManager\\\");\\r\\nconst TMPro_1 = require(\\\"TMPro\\\");\\r\\n//
    Class for daily rewards\\r\\nclass DailyReward extends ZEPETO_Script_1.ZepetoScriptBehaviour
    {\\r\\n    constructor() {\\r\\n        super(...arguments);\\r\\n        this.rewardAmount
    = 1; // Amount of daily reward\\r\\n        this.rewardDateKey = \\\"lastRewardDate\\\";
    // Key to save the date of the last reward\\r\\n        this.wakduKey = \\\"wakdu\\\";
    // Key to save the wakdu to be awarded as a reward\\r\\n    }\\r\\n    OnEnable()
    {\\r\\n        this.contentsText.text = DataManager_1.default.GetInstance().GetCurrentLanguageData(\\\"panel_daily\\\");\\r\\n       
    this.claimButtonText.text = DataManager_1.default.GetInstance().GetCurrentLanguageData(\\\"button_claim\\\");\\r\\n       
    this.RefreshStamp();\\r\\n    }\\r\\n    Start() {\\r\\n        // Debug: Decrease
    saved date by one day for debugging purposes\\r\\n        // let debugDate: Date
    = new Date();\\r\\n        // debugDate.setDate(debugDate.getDate() - 1);\\r\\n       
    // PlayerPrefs.SetString(this.rewardDateKey, debugDate.toISOString());\\r\\n       
    // // Debug: set wakdu 1 for debugging purposes\\r\\n        // DataManager.GetInstance().SetValue(this.wakduKey,
    1);\\r\\n        // Initialize claimButton\\r\\n        this.claimButton.onClick.AddListener(()
    => {\\r\\n            this.ClaimReward();\\r\\n        });\\r\\n        // Initailize
    wakdu stamp\\r\\n        this.RefreshStamp();\\r\\n        this.CheckIfRewardClaimable();\\r\\n   
    }\\r\\n    RefreshStamp() {\\r\\n        for (const stamp of this.stampPool)
    {\\r\\n            stamp.SetActive(false);\\r\\n        }\\r\\n        let currentWakdu
    = DataManager_1.default.GetInstance().GetValue(this.wakduKey);\\r\\n        for
    (let i = 0; i < currentWakdu; i++) {\\r\\n            this.CreateWakdu();\\r\\n       
    }\\r\\n    }\\r\\n    CreateWakdu() {\\r\\n        let stamp = this.FindInactiveStamp();\\r\\n       
    if (stamp !== null) {\\r\\n            // \uBE44\uD65C\uC131\uD654\uB41C \uC624\uBE0C\uC81D\uD2B8\uAC00
    \uC788\uB294 \uACBD\uC6B0\\r\\n            stamp.SetActive(true);\\r\\n       
    }\\r\\n        else {\\r\\n            // \uBE44\uD65C\uC131\uD654\uB41C \uC624\uBE0C\uC81D\uD2B8\uAC00
    \uC5C6\uB294 \uACBD\uC6B0\\r\\n            stamp = UnityEngine_1.Object.Instantiate(this.stampPrefab,
    this.contentsParent);\\r\\n            this.stampPool.push(stamp);\\r\\n       
    }\\r\\n    }\\r\\n    FindInactiveStamp() {\\r\\n        for (const stamp of
    this.stampPool) {\\r\\n            if (!stamp.activeSelf) {\\r\\n               
    return stamp;\\r\\n            }\\r\\n        }\\r\\n        return null;\\r\\n   
    }\\r\\n    // Method to check if daily reward is claimable\\r\\n    CheckIfRewardClaimable()
    {\\r\\n        // Initialize lastRewardDate to today's date\\r\\n        let
    lastRewardDate = new Date();\\r\\n        // Check if the last reward date is
    saved in PlayerPrefs\\r\\n        if (UnityEngine_1.PlayerPrefs.HasKey(this.rewardDateKey))
    {\\r\\n            // Retrieve the saved date as a string and convert it to a
    Date object\\r\\n            const dateString = UnityEngine_1.PlayerPrefs.GetString(this.rewardDateKey);\\r\\n           
    lastRewardDate = new Date(dateString);\\r\\n        }\\r\\n        // Calculate
    the difference between the current date and the date of the last reward\\r\\n       
    const currentDate = new Date();\\r\\n        const difference = (currentDate.getTime()
    - lastRewardDate.getTime()) / (1000 * 3600 * 24);\\r\\n        // Output the
    current date, last reward date, and difference for debugging purposes\\r\\n       
    // console.log(\\\"currentDate: \\\" + currentDate.getTime());\\r\\n        //
    console.log(\\\"lastRewardDate: \\\" + lastRewardDate.getTime());\\r\\n       
    // console.log(\\\"difference: \\\" + difference);\\r\\n        // Determine
    whether the daily reward is claimable based on the difference\\r\\n        const
    isClaimable = difference >= 1;\\r\\n        // Activate or deactivate the new
    image and claim button based on claimability\\r\\n        this.newImage.gameObject.SetActive(isClaimable);\\r\\n       
    this.claimButton.interactable = isClaimable;\\r\\n        // Return whether the
    difference is greater than or equal to 1 day\\r\\n        return isClaimable;\\r\\n   
    }\\r\\n    // Method to claim daily reward\\r\\n    ClaimReward() {\\r\\n       
    const isClaimable = this.CheckIfRewardClaimable();\\r\\n        if (isClaimable)
    {\\r\\n            // Grant the daily reward\\r\\n            let currentWakdu
    = DataManager_1.default.GetInstance().GetValue(this.wakduKey);\\r\\n           
    currentWakdu += this.rewardAmount;\\r\\n            DataManager_1.default.GetInstance().SetValue(this.wakduKey,
    currentWakdu);\\r\\n            // Update the date of the last reward\\r\\n           
    let currentDate = new Date();\\r\\n            currentDate.setHours(0);\\r\\n           
    currentDate.setMinutes(0);\\r\\n            UnityEngine_1.PlayerPrefs.SetString(this.rewardDateKey,
    currentDate.toISOString());\\r\\n            this.CreateWakdu();\\r\\n           
    this.newImage.gameObject.SetActive(!isClaimable);\\r\\n            this.claimButton.interactable
    = !isClaimable;\\r\\n            UIManager_1.default.GetInstance().OpenInformation(DataManager_1.default.GetInstance().GetCurrentLanguageData(\\\"info_dailygranted\\\"));\\r\\n           
    SoundManager_1.default.GetInstance().OnPlaySFX(\\\"Purchase\\\");\\r\\n       
    }\\r\\n        else {\\r\\n            UIManager_1.default.GetInstance().OpenInformation(DataManager_1.default.GetInstance().GetCurrentLanguageData(\\\"info_already_dailygranted\\\"));\\r\\n           
    SoundManager_1.default.GetInstance().OnPlaySFX(\\\"Tresh\\\");\\r\\n        }\\r\\n   
    }\\r\\n}\\r\\nexports.default = DailyReward;\\r\\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGFpbHlSZXdhcmQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJEYWlseVJld2FyZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLGlEQUFxRDtBQUNyRCw2Q0FBeUU7QUFDekUsbURBQStDO0FBQy9DLGdEQUF5QztBQUN6Qyw0Q0FBcUM7QUFDckMsa0RBQTJDO0FBQzNDLGlDQUF3QztBQUV4QywwQkFBMEI7QUFDMUIsTUFBcUIsV0FBWSxTQUFRLHFDQUFxQjtJQUE5RDs7UUFDWSxpQkFBWSxHQUFXLENBQUMsQ0FBQyxDQUFDLHlCQUF5QjtRQUNuRCxrQkFBYSxHQUFXLGdCQUFnQixDQUFDLENBQUMsMENBQTBDO1FBQ3BGLGFBQVEsR0FBVyxPQUFPLENBQUMsQ0FBQyxrREFBa0Q7SUE0SDFGLENBQUM7SUFuSEcsUUFBUTtRQUNKLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxHQUFHLHFCQUFXLENBQUMsV0FBVyxFQUFFLENBQUMsc0JBQXNCLENBQUMsYUFBYSxDQUFDLENBQUM7UUFDekYsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLEdBQUcscUJBQVcsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQyxjQUFjLENBQUMsQ0FBQztRQUM3RixJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUVELEtBQUs7UUFDRCwrREFBK0Q7UUFDL0Qsb0NBQW9DO1FBQ3BDLDhDQUE4QztRQUM5QyxzRUFBc0U7UUFDdEUsK0NBQStDO1FBQy9DLHdEQUF3RDtRQUV4RCx5QkFBeUI7UUFDekIsSUFBSSxDQUFDLFdBQVcsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRTtZQUN0QyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDdkIsQ0FBQyxDQUFDLENBQUM7UUFFSCx5QkFBeUI7UUFDekIsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1FBQ3BCLElBQUksQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0lBQ2xDLENBQUM7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\",\"assetPath\":\"Assets/Scripts/Event/DailyReward.ts\",\"manifest\":{\"properties\":[{\"assembly\":\"UnityEngine.UI\",\"name\":\"claimButton\",\"type\":\"UnityEngine.UI.Button\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"Unity.TextMeshPro\",\"name\":\"claimButtonText\",\"type\":\"TMPro.TextMeshProUGUI\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"Unity.TextMeshPro\",\"name\":\"contentsText\",\"type\":\"TMPro.TextMeshProUGUI\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"UnityEngine.UI\",\"name\":\"newImage\",\"type\":\"UnityEngine.UI.Image\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"UnityEngine.CoreModule\",\"name\":\"stampPrefab\",\"type\":\"UnityEngine.GameObject\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"UnityEngine.CoreModule\",\"name\":\"stampPool\",\"type\":\"UnityEngine.GameObject[]\",\"isArray\":true,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]},{\"assembly\":\"UnityEngine.CoreModule\",\"name\":\"contentsParent\",\"type\":\"UnityEngine.Transform\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[{\"name\":\"SerializeField\",\"args\":[]}]}],\"name\":\"DailyReward\",\"description\":\"\"},\"isCompiled\":true}"
  typescriptHash: 509a9652a75b611cbf8c3a9d7bce7f51
  onlyWriteTrigger: 0
